(this["webpackJsonpcovid-vaccine-graphs"]=this["webpackJsonpcovid-vaccine-graphs"]||[]).push([[0],{156:function(t,e,r){"use strict";r.r(e);var a=r(0),o=r.n(a),n=r(15),i=r.n(n),d=(r(51),r(52),r(1)),l=r(43),c=r.n(l),s=r(46),u=function(t){return new Promise((function(t,e){c()("https://data.ontario.ca/api/3/action/datastore_search?resource_id=8a89caa9-511c-4568-af89-7f2174b4378c&limit=365",(function(e,r){t(r)}))}))};function _(t){return t?parseInt(t.replace(/,/g,"")):0}function f(t){return{report_date:new Date(t.report_date),previous_day_doses_administered:_(t.previous_day_doses_administered),total_doses_administered:_(t.total_doses_administered),total_doses_in_fully_vaccinated_individuals:_(t.total_doses_in_fully_vaccinated_individuals),total_individuals_fully_vaccinated:_(t.total_individuals_fully_vaccinated)}}var p=r(44),v=r(6);var b=function(){var t=function(){var t,e,r=Object(s.a)("/api/user",u),a=r.data,o=!!r.error,n=!a;return{data:(null!==(t=null===a||void 0===a||null===(e=a.result)||void 0===e?void 0:e.records)&&void 0!==t?t:[]).map(f).map((function(t){var e=t.total_doses_administered-t.total_individuals_fully_vaccinated,r=e/1457e4;return Object(d.a)(Object(d.a)({},t),{},{at_least_1:e,at_least_1_ratio:r})})),failed:o,loading:n}}().data,e=[],r=new Date("June 5, 2021");if(t&&t.length>0){var a=t[t.length-1];a.report_date>r&&(r=a.report_date)}for(var o=new Date("December 24, 2020");o<=r;)e.push(o),o=new Date(o.getTime()+864e5);var n,i,l,c,_={},b={};if(t&&t.length>0){var g=t[t.length-1],h=e.findIndex((function(t){return t.toDateString()===g.report_date.toDateString()})),m=(n=h,i=g.at_least_1_ratio,l=e.length-1,c=.75,function(t){return(c-i)/(l-n)*(t-n)+i});e.forEach((function(t,e){t>=g.report_date&&(b[t.toDateString()]=m(e))}))}t.forEach((function(t){_[t.report_date.toDateString()]=t}));var D=e.map((function(t){var e;return null===(e=_[t.toDateString()])||void 0===e?void 0:e.at_least_1_ratio})),j=e.map((function(t){return b[t.toDateString()]})),y={labels:e.map((function(t){return t.toDateString()})),datasets:[{label:"Ratio of Ontario population with at least one dose",fill:!1,lineTension:.1,backgroundColor:"rgba(75,192,192,0.4)",borderColor:"rgba(75,192,192,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba(75,192,192,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:D},{type:"line",label:"Required trajectory for 75% by June 5",fill:!1,backgroundColor:"rgba(0,0,0,0)",borderColor:"rgba(75, 75, 75, 1)",data:j,borderDash:[20,20],borderWidth:0,pointBorderColor:"rgba(0,0,0,0)"}]};return Object(v.jsx)("div",{style:{height:"100vh"},children:Object(v.jsx)(p.Line,{data:y})})},g=function(t){t&&t instanceof Function&&r.e(3).then(r.bind(null,157)).then((function(e){var r=e.getCLS,a=e.getFID,o=e.getFCP,n=e.getLCP,i=e.getTTFB;r(t),a(t),o(t),n(t),i(t)}))},h=r(45);i.a.render(Object(v.jsx)(o.a.StrictMode,{children:Object(v.jsx)(h.a,{children:Object(v.jsx)(b,{})})}),document.getElementById("root")),g()},51:function(t,e,r){},52:function(t,e,r){}},[[156,1,2]]]);
//# sourceMappingURL=main.ea857782.chunk.js.map