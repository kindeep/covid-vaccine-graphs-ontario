(this["webpackJsonpcovid-vaccine-graphs"]=this["webpackJsonpcovid-vaccine-graphs"]||[]).push([[0],{158:function(t,e,a){"use strict";a.r(e);var r=a(0),n=a.n(r),o=a(17),i=a.n(o),d=(a(53),a(7)),l=(a(54),a(45)),u=a.n(l),s=a(48),c=function(t){return new Promise((function(t,e){u()("https://data.ontario.ca/api/3/action/datastore_search?resource_id=8a89caa9-511c-4568-af89-7f2174b4378c&limit=365",(function(e,a){t(a)}))}))};function _(t){return t?parseInt(t.replace(/,/g,"")):0}function v(t){return{report_date:new Date(t.report_date),previous_day_doses_administered:_(t.previous_day_doses_administered),total_doses_administered:_(t.total_doses_administered),total_doses_in_fully_vaccinated_individuals:_(t.total_doses_in_fully_vaccinated_individuals),total_individuals_fully_vaccinated:_(t.total_individuals_fully_vaccinated)}}function f(){var t,e,a=Object(s.a)("/api/user",c),r=a.data,n=!!a.error,o=!r,i=(null!==(t=null===r||void 0===r||null===(e=r.result)||void 0===e?void 0:e.records)&&void 0!==t?t:[]).map(v),d=i.map((function(t){return t.total_individuals_fully_vaccinated})),l=i.map((function(t){return t.total_doses_administered})),u=function(t,e){for(var a=[],r=Math.max(t.length,e.length),n=0;n<r;n++){var o=t.length>n?t[n]:0,i=e.length>n?e[n]:0;a.push((null!==o&&void 0!==o?o:0)-(null!==i&&void 0!==i?i:0))}return a}(l,d);return{data:i,failed:n,loading:o,derived:{at_least_1:u,at_least_1_ratio:function(t,e){return t.map((function(t){return t*e}))}(u,1/1457e4),total_individuals_fully_vaccinated:d,total_doses_administered:l}}}var p=a(46),b=a(6);var g=function(){var t,e,a,r,n=f(),o=n.data,i=n.derived,l=[],u=[];if(o&&o.length>2){for(var s=[],c=o.length-1,_=o[c].report_date,v=i.at_least_1_ratio[c],g=new Date("June 5, 2021"),h=_;h<=g;)s.push(h),h=new Date(h.getTime()+864e4);var m=(t=0,e=v,a=s.length-1,r=.75,function(n){return(r-e)/(a-t)*(n-t)+e}),y=o.map((function(t){return t.report_date}));(l=Object(d.a)(y)).splice(-1,1),u=(l=[].concat(Object(d.a)(l),s)).map((function(t,e){var a=e-c;return a>=0?m(a):null}))}var j={labels:l.map((function(t){return t.toDateString()})),datasets:[{label:"Ratio of Ontario population with at least one dose",fill:!1,lineTension:.1,backgroundColor:"rgba(75,192,192,0.4)",borderColor:"rgba(75,192,192,1)",borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",pointBorderColor:"rgba(75,192,192,1)",pointBackgroundColor:"#fff",pointBorderWidth:1,pointHoverRadius:5,pointHoverBackgroundColor:"rgba(75,192,192,1)",pointHoverBorderColor:"rgba(220,220,220,1)",pointHoverBorderWidth:2,pointRadius:1,pointHitRadius:10,data:i.at_least_1_ratio},{type:"line",label:"Required trajectory for 75% by June 5",fill:!1,backgroundColor:"rgba(0,0,0,0)",borderColor:"rgba(75, 75, 75, 1)",data:u,borderDash:[20,20],borderWidth:0,pointBorderColor:"rgba(0,0,0,0)"}]};return Object(b.jsx)("div",{style:{height:"100vh"},children:Object(b.jsx)(p.Line,{data:j})})},h=function(t){t&&t instanceof Function&&a.e(3).then(a.bind(null,159)).then((function(e){var a=e.getCLS,r=e.getFID,n=e.getFCP,o=e.getLCP,i=e.getTTFB;a(t),r(t),n(t),o(t),i(t)}))},m=a(47);i.a.render(Object(b.jsx)(n.a.StrictMode,{children:Object(b.jsx)(m.a,{children:Object(b.jsx)(g,{})})}),document.getElementById("root")),h()},53:function(t,e,a){},54:function(t,e,a){}},[[158,1,2]]]);
//# sourceMappingURL=main.510c1f13.chunk.js.map